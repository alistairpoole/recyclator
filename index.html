<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.4.1.min.js"></script>
</head>

<body>
    <p style="color: black; position: absolute; top:0;">Alpha 1.0.6</p>
<div style="width: 100%; height: 30vh; padding-top: 20vh; margin-bottom: 5em; display: flex; flex-flow: column; align-items: center; justify-content: center;">
    <label style="text-align: center;">
        <h2 style="font-family: sans-serif; font-size: 2.1em">Search for something to recycle</h2>
        <p style="font-family: sans-serif;">Start typing the name of an item to find out which stream it belongs in</p>
    </label>
    <input type="text" id="searchbox" style="width: 450px; padding: 10px; max-width: 90%; font-size: 1.2em; border-radius: 5px; border: 1px solid grey;">
</div>

<div style="max-width: 550px; padding: 0px 3%; box-sizing: border-box; margin: auto;">
    <table id="results">
    </table>
</div>

<style>
    #results {
        width: 100%;
    }
    #results tr {
        border-bottom: 1px solid grey;
        display: none;
    }
    #results td {
        padding: 15px;
        font-family: sans-serif;
    }
    #results td:first-child {
        text-align: left;
    }
    #results td:last-child {
        text-align: right;
    }
    #results span {
        display: none;
    }
</style>

<script>
    var example = 
    {
        "items":[
            {
                "name":"Tea bag",
                "alt":"teabag, tea pouch",
                "stream":"Compost"
            },
            {
                "name":"Tea wrapper",
                "alt":"tea package, tea packaging",
                "stream":"Landfill"
            },
            {
                "name":"Starburst wrapper",
                "alt":"star burst, starburst packaging, starburst paper, star-burst",
                "stream":"Landfill"
            },
            {
                "name":"Paper cup (DRY)",
                "alt":"",
                "stream":"Paper"
            },
            {
                "name":"Paper cup (WET)",
                "alt":"",
                "stream":"Compost"
            },
            {
                "name":"Tissue",
                "alt":"tissue paper, kleenex, klenex, cleanex",
                "stream":"Compost"
            },
            {
                "name":"Aluminum can",
                "alt":"coke can, pepsi can, beer can, soda can, aluminium can",
                "stream":"Plastic and Metal"
            }
        ]
    }
    
    var results = $("#results");
    for (i = 0; i < example.items.length; i++) {
        console.log("loop " + i);
        results.append(
            "<tr>" +
            "   <td>" + example.items[i].name + "<span>" + example.items[i].alt + "</span></td>" +
            "   <td>" + example.items[i].stream + "</td>" +
            "</tr>"
        );
    }
    
    var input = $("#searchbox");
    input.on( "keyup", function search() {
        // Declare variables
        var tr = $("#results tr");
        var searchTerm = input.val();
        if (searchTerm == "") {
            // Loop through all table rows and hide
            for (i = 0; i < tr.length; i++) {
                tr[i].style.display = "none";
            }
        } else {
            var filter = searchTerm.toUpperCase();
            // Loop through all table rows, and hide those who don't match the search query
            for (i = 0; i < tr.length; i++) {
                td = tr[i].getElementsByTagName("td")[0];
                if (td) {
                    txtValue = td.textContent || td.innerText;
                    if (txtValue.toUpperCase().indexOf(filter) > -1) {
                        tr[i].style.display = "table-row";
                    } else {
                        tr[i].style.display = "none";
                    }
                }
            }
        }
    });
</script>
</body>
</html>
